define(["lib/underscore","lib/backbone"],function(e,t){var n=t.Model.extend({items:[],path:[],type:"",selectionSize:function(){return this.items.length},setSelection:function(e){this.setType(e[0]),this.items=e.slice(),this.update()},setType:function(e){e=e||"",e.length&&(e=e.substr(0,1).toLowerCase()),this.type.length&&this.type!==e&&this.deselectAll(),this.type=e},toggle:function(e){return this.setType(e),this.select(e)?!0:(this.deselect(e),!1)},contains:function(t){return e.contains(this.items,t)},select:function(e){return this.setType(e),this.contains(e)?!1:(this.items.push(e),this.path.length=0,this.update(),!0)},deselect:function(t){return this.contains(t)?(this.items.splice(e.indexOf(this.items,t),1),this.path.length=0,this.update(),!0):!1},deselectAll:function(e){this.items.length=0,this.path.length=0,this.type="",e||this.update()},selectPath:function(e,t){this.path=e.slice(),t||this.update()},update:function(){this.trigger("update")}});return new n});