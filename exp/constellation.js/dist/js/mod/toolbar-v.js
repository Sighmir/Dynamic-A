define(["lib/jquery","lib/underscore","lib/backbone","./grid-m","./grid-c","./window-v"],function(e,t,n,r,i,s){var o=n.View.extend({el:"#toolbar",initialize:function(){this.listenTo(r,"change",this.render),this.render()},render:function(){this.$(".bg-url").val(r.bg)},events:{"click .action":"onAction","click .bg-load":"onBgLoad","click .bg-clear":"onBgClear","click .bg-demo":"onBgDemo","change select":"onSelectGrid"},onAction:function(t){switch(e(t.currentTarget).attr("data-action")){case"join":i.joinNodes();return;case"split":i.splitNodes();return;case"polygon":i.makePolygon();return;case"remove":i.deleteGeometry();return;case"path":i.findPath();return;case"snap":i.snapNodeToGrid();return;case"nearest":i.selectNearestGridNode();return;case"hittest":i.hitTestGeometry();return;case"print":i.print();return}},onSelectGrid:function(){},onBgLoad:function(e){r.setBackground(this.$(".bg-url").val()),e.preventDefault()},onBgClear:function(e){r.setBackground(""),e.preventDefault()},onBgDemo:function(t){var n=e(t.currentTarget).attr("href");r.setBackground(n),t.preventDefault()}});return new o});